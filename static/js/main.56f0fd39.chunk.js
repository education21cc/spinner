(this.webpackJsonpspinner=this.webpackJsonpspinner||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(5),o=n.n(l),i=n(6),s=n(1);!function(e){e.first="ease-in",e.last="ease-out",e.mid="linear",e.firstAndLast="ease-in-out"}(a||(a={}));var u,f=function(e){var t=e.disabled,n=e.initialMove,l=e.translations,o=e.onCardChanged,i=Object(r.useRef)(0),s=Object(r.useRef)(!1),u=Object(r.useRef)(null),f=Object(r.useMemo)((function(){return m(e.data)}),[e.data]),d=Object(r.useCallback)((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.firstAndLast,n=u.current,r=i.current,c=Math.ceil(f.length/2),l=0,o=r;o<n.children.length+r;o++){var s=o%f.length;o<0&&(s+=f.length);var m=n.children[s%f.length];m.style.transition="top ".concat(e,"s ").concat(t),m.setAttribute("index",s+""),Math.abs((o-r)%(f.length-1))<2?(m.style.transition="top ".concat(e,"s ").concat(t),m.style.visibility="visible"):(m.style.transition="",m.style.visibility="hidden"),m.style.top="".concat(l>c?210*(-2*c+l+f.length%2):210*l,"px"),l++}}),[f.length]),g=function(){for(var e=1;p(i.current+e);)if(++e===f.length+1)return;h(e)},v=function(){for(var e=-1;p(i.current+e);)if(--e===f.length-1)return;h(e)},b=Object(r.useCallback)((function(){o(function(){var e=i.current%f.length;return u.current.children[e].getAttribute("data-value")}())}),[f.length,o]),h=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!s.current)if(1===Math.abs(e))i.current+=e,i.current<0&&(i.current=f.length+i.current),s.current=!0,d(.2,a.firstAndLast),setTimeout((function(){return s.current=!1}),200),b();else{var t=i.current+e;s.current=!0;var n=setInterval((function(){if(i.current===t)return s.current=!1,void clearInterval(n);i.current+=e/Math.abs(e);var r=a.mid,c=.2;t-i.current===Math.abs(e)-1?(r=a.first,c/=.75):i.current===t&&(r=a.last,c/=.75),d(c,r),b()}),200)}}),[b,f.length,d]),p=function(e){return e<1&&(e=+f.length),e%=f.length,u.current.children[e].classList.contains("disabled")};Object(r.useEffect)((function(){d(),h(n)}),[n,h,d]),Object(r.useEffect)((function(){if(t&&t.length){for(var e=u.current,n=0;n<e.children.length;n++){var a=e.children[n],r=a.getAttribute("data-value");-1!==t.indexOf(r)?a.classList.add("disabled"):a.classList.remove("disabled")}h(1)}}),[t,h]);return c.a.createElement("div",{className:"ring ".concat(e.className),ref:u,onClick:function(e){var t=e.target.parentNode;e.clientY-t.getBoundingClientRect().top>1?g():v()}},f.map((function(t){return function(t){if(e.image)return c.a.createElement("div",{key:t,className:"item",style:{backgroundImage:"url(".concat(t,")")},"data-value":t});var n=(l[t]||"").replace(/&shy;/gi,"\xad");return c.a.createElement("div",{key:t,className:"item","data-value":t},n)}(t)})))},m=function(e){for(var t,n=Object.assign([],e),a=n.length;0!==a;){var r=Math.floor(Math.random()*a);t=n[a-=1],n[a]=n[r],n[r]=t}return n},d=(n(12),function(e){var t=e.data,n=e.correct,a=e.translations,l=e.onClick,o=e.onRing0Changed,i=e.onRing1Changed,s=e.onRing2Changed,u=Object(r.useMemo)((function(){return t.reduce((function(e,t){return-1===e.indexOf(t.ring1)&&e.push(t.ring1),e}),[])}),[t]),m=Object(r.useMemo)((function(){return t.reduce((function(e,t){return-1===e.indexOf(t.ring2)&&e.push(t.ring2),e}),[])}),[t]),d=Object(r.useMemo)((function(){return t.reduce((function(e,t){return-1===e.indexOf(t.ring3)&&e.push(t.ring3),e}),[])}),[t]);return c.a.createElement("div",{className:"spinner",onClick:l},c.a.createElement(f,{className:"ring1",disabled:n,initialMove:6,data:u,translations:a,onCardChanged:o,image:!0}),c.a.createElement(f,{className:"ring2",initialMove:9,data:m,translations:a,onCardChanged:i}),c.a.createElement(f,{className:"ring3",initialMove:14,data:d,translations:a,onCardChanged:s}))}),g=function(e){return c.a.createElement("button",{className:"green button check",onClick:e.onClick},"Check")},v=["","",""],b=function(e,t){switch(t.type){case"updateRing0":return Object.assign(v,e,{0:t.value});case"updateRing1":return Object.assign(v,e,{1:t.value});case"updateRing2":return Object.assign(v,e,{2:t.value})}};n(13);!function(e){e.correct="correct",e.wrong="wrong"}(u||(u={}));var h=function(e){return c.a.createElement("div",{className:"feedback ".concat(e.mode)},c.a.createElement("span",null,e.mode),c.a.createElement("button",{className:"grey button continue",onClick:e.onContinue},"Continue"))};n(14);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var O=c.a.createElement("defs",null,c.a.createElement("style",null,".a{fill:#fff;}.a,.b{stroke:#283583;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.b{fill:none;}")),y=c.a.createElement("title",null,"Back"),w=c.a.createElement("circle",{className:"a",cx:15.02,cy:15.02,r:14.65}),j=c.a.createElement("path",{className:"b",d:"M11.64,16",transform:"translate(-0.97 -0.93)"}),k=c.a.createElement("path",{className:"b",d:"M11.63,16",transform:"translate(-0.97 -0.93)"}),x=c.a.createElement("path",{className:"b",d:"M20.38,22.88",transform:"translate(-0.97 -0.93)"}),N=c.a.createElement("line",{className:"b",x1:19.39,y1:8.16,x2:10.65,y2:15.02}),C=c.a.createElement("line",{className:"b",x1:19.39,y1:21.98,x2:10.65,y2:15.11}),R=function(e){var t=e.svgRef,n=e.title,a=E(e,["svgRef","title"]);return c.a.createElement("svg",p({width:30.04,height:30.04,viewBox:"0 0 30.04 30.04",ref:t},a),O,void 0===n?y:n?c.a.createElement("title",null,n):null,w,j,k,x,N,C)},M=c.a.forwardRef((function(e,t){return c.a.createElement(R,p({svgRef:t},e))})),T=(n.p,function(e){var t=e.gameDataReceived,n=function(e){if(window.hasOwnProperty("webkit")&&window.webkit.hasOwnProperty("messageHandlers")){var t=JSON.stringify(e);webkit.messageHandlers.cordova_iab.postMessage(t)}else window.parent.postMessage(e,"*")};return Object(r.useEffect)((function(){window.setGameData=function(e){n({type:"setGameData",data:e})},window.setLevelScore=function(e,t,a){var r,c,l=(null===(r=window.GAMEDATA)||void 0===r?void 0:r.levelsCompleted)||[],o=l.findIndex((function(t){return t.level===e}));o>-1?l[o].score>t&&(l[o].score=t):l.push({level:e,score:t,maxScore:a});var i={levelsCompleted:l,settings:(null===(c=window.GAMEDATA)||void 0===c?void 0:c.settings)||{}};n({type:"setGameData",data:i})},window.getGameData=function(){return window.GAMEDATA},window.addEventListener("message",(function(e){e.data.hasOwnProperty("userId")&&(window.GAMEDATA=e.data,t(e.data))}),!1)}),[t]),c.a.createElement("div",{className:"close"},c.a.createElement(M,{onClick:function(){n({type:"exit"})}}))}),A=(n(15),function(e){return c.a.createElement("div",{className:"basedialog ".concat(e.className)},e.children)});function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var P=c.a.createElement("defs",null,c.a.createElement("style",null,"\n            .star-empty {\n                fill: #f8f8f8;\n                stroke: #b0b0b0;\n                stroke-width: 3px;\n            }\n        ")),D=c.a.createElement("path",{className:"star-empty",d:"M67.517,0l21.1,42.2,46.418,6.752L101.275,81.864l7.6,46.418L67.517,106.339,26.163,128.282l7.6-46.418L0,48.95,46.418,42.2Z",transform:"translate(3.223 3.354)"}),G=function(e){var t=e.svgRef,n=e.title,a=L(e,["svgRef","title"]);return c.a.createElement("svg",S({width:141.478,height:134.378,viewBox:"0 0 141.478 134.378",ref:t},a),n?c.a.createElement("title",null,n):null,P,D)},I=c.a.forwardRef((function(e,t){return c.a.createElement(G,S({svgRef:t},e))})),B=(n.p,n(16),function(e){return c.a.createElement(A,{className:"intro-dialog"},c.a.createElement("div",{className:"top"},c.a.createElement("h1",null,e.headerText)),c.a.createElement("div",{className:"center"},c.a.createElement("section",null,e.descriptionText)),c.a.createElement("div",{className:"bottom"},c.a.createElement(I,{className:"star"}),c.a.createElement("span",{className:"stars-to-gain"},e.starsToGainText),c.a.createElement("button",{className:"green button start",onClick:e.onStart},e.startText)))});function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var W,Z=c.a.createElement("defs",null,c.a.createElement("style",null,"\n            .star-full {\n                fill: #fcda00;\n            }\n        ")),F=c.a.createElement("path",{className:"star-full",d:"M67.517,0l21.1,42.2,46.418,6.752L101.275,81.864l7.6,46.418L67.517,106.339,26.163,128.282l7.6-46.418L0,48.95,46.418,42.2Z"}),Y=function(e){var t=e.svgRef,n=e.title,a=H(e,["svgRef","title"]);return c.a.createElement("svg",J({width:135.033,height:128.282,viewBox:"0 0 135.033 128.282",ref:t},a),n?c.a.createElement("title",null,n):null,Z,F)},$=c.a.forwardRef((function(e,t){return c.a.createElement(Y,J({svgRef:t},e))})),_=(n.p,n(17),function(e){var t=e.total,n=e.mistakes,a=Math.max(t-n,0);console.log("mistakes: ".concat(n)),console.log("total: ".concat(t)),Object(r.useEffect)((function(){window.setLevelScore&&window.setLevelScore(1,a,t)}),[a,t]);return c.a.createElement(A,{className:"complete-dialog"},c.a.createElement("div",{className:"block"},c.a.createElement("h1",null,e.headerText)),c.a.createElement("div",{className:"block score"},e.scoreText.replace("{0}",a.toString()).replace("{1}",t.toString())),c.a.createElement("div",{className:"block stars"},function(){for(var e=[],n=0;n<t;n++)e.push(c.a.createElement("div",{key:"star".concat(n)},c.a.createElement(I,null),n<a&&c.a.createElement($,{className:"full"})));return e}()),c.a.createElement("div",{className:"bottom"},c.a.createElement("button",{className:"green button",onClick:e.onTryAgain},e.tryAgainText),c.a.createElement("button",{className:"red button",onClick:e.onExit},e.exitText)))}),q=(n(18),function(){return c.a.createElement("div",{className:"loading-background"},c.a.createElement("div",{className:"white-block"},c.a.createElement("div",{className:"outset"}),c.a.createElement("div",{className:"blue-block"})),c.a.createElement("div",{className:"subtext"},"Stay curious"))});n(19),n(20);!function(e){e[e.intro=0]="intro",e[e.normal=2]="normal",e[e.wrong=4]="wrong",e[e.correct=8]="correct",e[e.complete=16]="complete"}(W||(W={}));var z=function(){var e,t=Object(r.useState)(W.intro),n=Object(s.a)(t,2),a=n[0],l=n[1],o=Object(r.useState)(),f=Object(s.a)(o,2),m=f[0],p=f[1],E=Object(r.useState)({}),O=Object(s.a)(E,2),y=O[0],w=O[1],j=Object(r.useState)([]),k=Object(s.a)(j,2),x=k[0],N=k[1],C=Object(r.useState)(0),R=Object(s.a)(C,2),M=R[0],A=R[1],S=Object(r.useReducer)(b,v),L=Object(s.a)(S,2),P=L[0],D=L[1],G=Object(r.useState)(!0),I=Object(s.a)(G,2),J=I[0],H=I[1],Z=Object(r.useCallback)((function(e){D({type:"updateRing0",value:e})}),[]),F=Object(r.useCallback)((function(e){D({type:"updateRing1",value:e})}),[]),Y=Object(r.useCallback)((function(e){D({type:"updateRing2",value:e})}),[]);Object(r.useEffect)((function(){var e=setTimeout((function(){window.GAMEDATA||(console.log("no bridge found, fetching fallback"),fetch("".concat("/spinner","/config/spinner.json")).then((function(e){e.json().then((function(e){K(e),H(!1)}))})))}),2e3);return function(){clearTimeout(e)}}),[]);var $=function(){l(W.normal)},z=function(){l(W.normal)},K=function(e){if(p(e.content),H(!1),e.translations){var t=e.translations.reduce((function(e,t){return e[t.key]=t.value,e}),{});w(t)}};return Object(r.useEffect)((function(){a===W.normal&&x.length===(null===m||void 0===m?void 0:m.length)&&l(W.complete)}),[x,m,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(T,{gameDataReceived:K}),J&&c.a.createElement(q,null),c.a.createElement("div",{className:"background"},c.a.createElement("div",{className:"app-center"},a===W.intro&&!!m&&c.a.createElement(B,{onStart:z,headerText:y["intro-header"],descriptionText:y["intro-description"],starsToGainText:null===(e=y["intro-stars-to-gain"])||void 0===e?void 0:e.replace("{0}",m.length.toString()),startText:y["intro-start"]}),a===W.complete&&c.a.createElement(_,{onTryAgain:function(){l(W.normal),A(0),N([])},onExit:z,total:(null===m||void 0===m?void 0:m.length)||0,mistakes:M,headerText:y["complete-header"],scoreText:y["complete-score"],tryAgainText:y["complete-try-again"],exitText:y["complete-exit"]}),m&&!!(a&(W.normal|W.wrong|W.correct))&&c.a.createElement(d,{data:m,correct:x,translations:y,onClick:function(){l(W.normal)},onRing0Changed:Z,onRing1Changed:F,onRing2Changed:Y}),a===W.normal&&c.a.createElement(g,{onClick:function(){m&&(m.some((function(e){return e.ring1===P[0]&&e.ring2===P[1]&&e.ring3===P[2]}))?(l(W.correct),N([].concat(Object(i.a)(x),[P[0]]))):(l(W.wrong),A(M+1)))}}),a===W.correct&&c.a.createElement(h,{mode:u.correct,onContinue:$}),a===W.wrong&&c.a.createElement(h,{mode:u.wrong,onContinue:$}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.56f0fd39.chunk.js.map